(function(l,u,p,s,e,h,a,n,b,I){"use strict";const{FormSection:d,FormSwitchRow:v,FormRow:t,FormInput:T}=p.Forms;function w(){return h.useProxy(e.storage),e.storage.messageContent=`:wave: **Hi there!**
Please add me to your friends list!`,React.createElement(u.ReactNative.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(d,{title:"General",titleStyleType:"no_border"},React.createElement(t,{label:"Invites History",subLabel:"Show invites list history",leading:React.createElement(t.Icon,{source:s.getAssetIDByName("ic_history_24px")}),onPress:function(){a.toasts.showToast("Invite history is not implemented yet",705)}}),React.createElement(t,{label:"Message content with Invite Link. (Preview)",subLabel:e.storage.messageContent,leading:React.createElement(t.Icon,{source:s.getAssetIDByName("ic_selection_checked_24px")})})),React.createElement(d,{title:"Show in",titleStyleType:"no_border"},React.createElement(v,{label:"User profile",subLabel:"Show invite button in user profile. When you click you send a friend invite link to selected user as message",leading:React.createElement(t.Icon,{source:s.getAssetIDByName("ic_members_24px")}),value:e.storage.profileButton,onValueChange:function(o){e.storage.profileButton=o}})),React.createElement(d,{title:"Dev",titleStyleType:"no_border"},React.createElement(v,{label:"Debug",subLabel:"Show debug logs prefixed by [FriendLink/INFO] - {message}",leading:React.createElement(t.Icon,{source:s.getAssetIDByName("ic_rulebook_16px")}),value:e.storage.debug,onValueChange:function(o){e.storage.debug=o}}),React.createElement(t,{label:"Version",subLabel:"Alpha - 0.2",leading:React.createElement(t.Icon,{source:s.getAssetIDByName("ic_selection_checked_24px")})})))}e.storage.profileButton??=!1,e.storage.messageContent??=`:wave: **Hi there!**
Please add me to your friends list!`,e.storage.debug??=!1;const B=n.findByDisplayName("UserProfileSection",!1),C=n.findByProps("openLazy","hideActionSheet"),S=n.findByProps("getChannel","getDMFromUserId"),R=n.findByDisplayName("Icon"),_=n.findByDisplayName("UserProfileRow"),A=n.findByProps("sendMessage","receiveMessage"),m=n.findByProps("createFriendInvite","getAllFriendInvites","revokeFriendInvites"),E=b.after("default",B,function(o,g){const{props:r}=g,{children:c}=r;if(c!==void 0){try{if(c[1]!=null&&c[1]!=null){let i=c[1]?.props?.children;if(i===void 0)return;const f=i[1]?.props;if(f===void 0||f?.label!==u.i18n.Messages.MUTUAL_GUILDS||!e.storage.profileButton)return;const D=i[0].props.userId,P=S.getDMFromUserId(D),L=async function(){console.log("ABC - Send friend invite button clicked");const y=await m.createFriendInvite();if(console.log("ABC - Invite checking"),!y){a.toasts.showToast("Cannot send friend invite link",765);return}console.log("ABC - Invite sending");const N=await A.sendMessage(P,{content:e.storage.messageContent+`


https://discord.gg/`+y.code});if(console.log("ABC - Invite sended"),!N){a.toasts.showToast("Cannot send friend invite link",765);return}console.log("ABC - Invite is sended"),a.toasts.showToast("Invite has been sended",426),C.hideActionSheet()};i.push(React.createElement(_,{label:"Send Friend Invite",onPress:L,trailing:React.createElement(R,{source:869,size:"medium",disableColor:!0})}))}}catch(i){alert("Error while rendering friend invite button in user relations error="+i.toString())}o.result=[g]}});let F=I.registerCommand({name:"Friend Invite",displayName:"invite",description:"Send friend invite",displayDescription:"Send friend invite",async execute(o,g){const r=await m.createFriendInvite();return console.log("ABC - Invite checking"),r?{content:e.storage.messageContent+`


https://discord.gg/`+r.code}:(a.toasts.showToast("Cannot send friend invite link",765),{content:"Cannot send friend invite link"})},inputType:1,type:1,options:[],applicationId:"-1"});var k={onLoad:function(){console.log("Hello world!")},onUnload:function(){console.log("Goodbye, world."),E(),F()},settings:w};return l.default=k,Object.defineProperty(l,"__esModule",{value:!0}),l})({},vendetta.metro.common,vendetta.ui.components,vendetta.ui.assets,vendetta.plugin,vendetta.storage,vendetta.ui,vendetta.metro,vendetta.patcher,vendetta.commands);
